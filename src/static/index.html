<!DOCTYPE html>
<html lang="en" ng-app="appstore" ng-controller="indexCtrl" itemscope itemtype="http://schema.org/MobileApplication">
  <head>
    <title ng-bind="title">Ubuntu Touch Apps</title>
    <base href="/" />

    <meta name="description" content="App store for Ubuntu Touch" ng-content="og.description" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />

    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Ubuntu Touch Apps" ng-content="og.title" />
    <meta itemprop="description" content="Browse and discover apps for Ubuntu Touch" ng-content="og.description" />
    <meta itemprop="image" content="https://appstore.bhdouglass.com/img/ubuntu-logo.png" ng-content="og.image" />

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@bhdouglass" />
    <meta name="twitter:title" content="Ubuntu Touch Apps" ng-content="og.title" />
    <meta name="twitter:description" content="Browse and discover apps for Ubuntu Touch" ng-content="og.description" />
    <meta name="twitter:image:src" content="https://appstore.bhdouglass.com/img/ubuntu-logo.png" ng-content="og.image" />

    <!-- Open Graph data -->
    <meta property="og:title" content="Ubuntu Touch Apps" ng-content="og.title" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://appstore.bhdouglass.com/apps" ng-content="og.url" />
    <meta property="og:image" content="https://appstore.bhdouglass.com/img/ubuntu-logo.png" ng-content="og.image" />
    <meta property="og:description" content="Browse and discover apps for Ubuntu Touch" ng-content="og.description" />
    <meta property="og:site_name" content="Ubuntu Touch Apps" ng-content="title" />

    <link rel="icon" type="image/png" href="/img/favicon.png">

    <style>
      .ng-cloak {
        display: none !important;
      }
    </style>

    <!--(if target dev)><!-->
    <script>
      var v = '';
      var env = 'dev';
    </script>
    <!--<!(endif)-->

    <!--(if target dist)>
    <script>
      var v = '?{{version}}';
      var env = 'dist';
    </script>
    <!(endif)-->

    <script src="//cdnjs.cloudflare.com/ajax/libs/lazyload/2.0.3/lazyload-min.js"></script>
    <script>
      var js = [
        '//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js',
        '//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/jquery.swipebox/1.3.0.2/js/jquery.swipebox.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.0/angular.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.11/angular-ui-router.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/angulartics/0.17.2/angulartics.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/angulartics/0.17.2/angulartics-ga.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js',
        '//www.google-analytics.com/analytics.js',
      ];

      if (env == 'dist') {
        js.push('/app/app.min.js' + v);
      }
      else {
        js = js.concat([
          '/app/app.js' + v,
          '/app/controllers/indexCtrl.js' + v,
          '/app/controllers/appsCtrl.js' + v,
          '/app/controllers/appCtrl.js' + v,
          '/app/controllers/mainCtrl.js' + v,
          '/app/services/api.js' + v,
          '/app/services/utils.js' + v,
          '/app/directives/stars.js' + v,
          '/app/directives/pagination.js' + v,
          '/app/directives/ngContent.js' + v,
          '/app/filters/nl2br.js' + v,
          '/app/filters/dollars.js' + v,
        ]);
      }

      LazyLoad.js(js, function() {
        ga('create', 'UA-16555025-3', 'auto');
      });

      var css = [
        '//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css',
        '//cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.1.6/css/ripples.min.css',
        '//cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.1.6/css/material.min.css',
        '//cdnjs.cloudflare.com/ajax/libs/jquery.swipebox/1.3.0.2/css/swipebox.min.css',
        '//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.css',
        '//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css',
        '//fonts.googleapis.com/css?family=Ubuntu',
      ];

      if (env == 'dist') {
        css.push('/css/main.min.css' + v);
      }
      else {
        css.push('/css/main.css' + v);
      }

      LazyLoad.css(css);
    </script>
  </head>
  <body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">
            <a ui-sref="apps(back)" class="link clickable" ng-if="$state.current.name == 'app'">
              <i class="fa fa-chevron-left ng-cloak"></i>
              <img src="/img/ubuntu-logo.svg" class="logo" ng-class="{'rotate': loading}" />
              Ubuntu Touch Apps
            </a>
            <a ui-sref="main" class="link clickable ng-cloak" ng-if="$state.current.name != 'app'">
              <i class="fa fa-chevron-left" ng-show="$state.current.name == 'apps'"></i>
              <img src="/img/ubuntu-logo.svg" class="logo" ng-class="{'rotate': loading}" />
              Ubuntu Touch Apps
            </a>
          </span>
        </div>
        <div class="navbar-collapse collapse navbar-right">
          <ul class="nav navbar-nav">
            <li>
              <a href="http://feeds.feedburner.com/UbuntuTouchNewApps">RSS</a>
            </li>
            <li>
              <a href="https://github.com/bhdouglass/ubuntu-appstore">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container" ng-cloak ng-show="error">
      <div class="row">
        <div class="col-sm-12 centered">
          <div class="alert alert-dismissable alert-warning clickable text-center"  ng-click="dismissError()">
            <button type="button" class="close" ng-click="dismissError()">
              <i class="fa fa-times"></i>
            </button>
            <h4 ng-bind="error"></h4>
          </div>
        </div>
      </div>
    </div>

    <div class="container main">
      <div ui-view></div>
    </div>
  </body>
</html>
